<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Maze Player</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            display: flex; flex-direction: column; align-items: center; 
            background: #1a1a1a; color: white; margin: 0; padding: 20px;
        }
        #maze { 
            display: grid; gap: 2px; background: #333; 
            padding: 10px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        .cell { 
            width: 35px; height: 35px; display: flex; 
            align-items: center; justify-content: center; font-size: 12px;
        }
        .wall { background-color: #2c3e50; border-radius: 2px; }
        .path { background-color: #ecf0f1; }
        .agent { background-color: #e74c3c; border-radius: 50%; color: white; font-weight: bold; }
        .goal { background-color: #2ecc71; border-radius: 4px; color: white; font-weight: bold; }
        .controls { margin-bottom: 20px; }
        button { 
            padding: 10px 25px; font-size: 16px; cursor: pointer; 
            background: #3498db; color: white; border: none; border-radius: 5px;
            transition: background 0.3s;
        }
        button:hover { background: #2980b9; }
    </style>
</head>
<body>

    <h1>Labyrinthe Vercel</h1>
    
    <div class="controls">
        <button onclick="fetchMaze()">Charger le Labyrinthe</button>
    </div>

    <div id="maze"></div>

    <script>
        async function fetchMaze() {
            const container = document.getElementById('maze');
            container.innerHTML = "Chargement...";
            
            try {
                // Appel vers l'API PHP sur Vercel
                const response = await fetch('/api/index');
                const data = await response.json();
                
                if (data.status === "success") {
                    render(data.maze);
                } else {
                    container.innerHTML = "Erreur: " + data.message;
                }
            } catch (e) {
                container.innerHTML = "Erreur de connexion à l'API";
                console.error(e);
            }
        }

        function render(maze) {
            const container = document.getElementById('maze');
            container.innerHTML = '';
            container.style.gridTemplateColumns = `repeat(${maze[0].length}, 35px)`;

            maze.forEach(row => {
                row.forEach(cell => {
                    const div = document.createElement('div');
                    div.className = 'cell';
                    if (cell === '1') div.classList.add('wall');
                    else if (cell === '0') div.classList.add('path');
                    else if (cell === 'A') { div.classList.add('agent'); div.innerText = 'A'; }
                    else if (cell === 'G') { div.classList.add('goal'); div.innerText = 'G'; }
                    container.appendChild(div);
                });
            });
        }

        // Chargement auto au démarrage
        window.onload = fetchMaze;
    </script>
</body>
</html>
